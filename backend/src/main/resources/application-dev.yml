spring:
  mvc:
    # 1. 요청 파라미터 및 헤더의 상세 정보를 생략 없이 로그에 기록
    log-request-details: true
  config:
    activate:
      on-profile: dev

  datasource:
    # docker-compose.yml의 postgres 설정과 일치시킴
    url: ${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/mydatabase}
    username: ${SPRING_DATASOURCE_USERNAME:myuser}
    password: ${SPRING_DATASOURCE_PASSWORD:mypassword}

  data:
    redis:
      host: localhost
      port: 6379
      # [중요] docker-compose.yml에서 설정한 비밀번호 (--requirepass mypassword)
      password: mypassword

  jpa:
    hibernate:
      ddl-auto: update
    properties:
      hibernate:
        format_sql: true
        show_sql: true

  # MinIO (S3) 설정
  cloud:
    aws:
      s3:
        endpoint: http://localhost:9000 # Docker 외부(Local)에서 접속하므로 9000 포트 사용
        path-style-access-enabled: true
      credentials:
        # docker-compose.yml의 MINIO_ROOT_USER / PASSWORD 와 일치
        access-key: ${MINIO_ACCESS_KEY:minioadmin}
        secret-key: ${MINIO_SECRET_KEY:minioadmin}
      region:
        static: us-east-1
      stack:
        auto: false


  flyway:
    clean-on-validation-error: true
    enabled: true
    validate-on-migrate: false
    baseline-on-migrate: false
    locations: 
      - classpath:db/migration
      - classpath:db/testdata

  sql:
    init:
      mode: never

logging:
  level:
    root: INFO
    com.pairingplanet: DEBUG
    # 추가: 어떤 URL이 어떤 Controller 메서드에 연결되어 있는지(Mapping) 보여줍니다.
    org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping: DEBUG
    # 추가: HTTP 요청(Request)과 응답(Response)의 전체적인 흐름을 보여줍니다.
    org.springframework.web: DEBUG
    # 추가: 시큐리티 필터를 통과하는 과정을 더 상세히 보고 싶을 때 유용합니다.
    org.springframework.security: DEBUG

    org.hibernate.type.descriptor.sql.BasicBinder: TRACE
    org.flywaydb: DEBUG
    software.amazon.awssdk: INFO

jwt:
  secret: ${JWT_SECRET:cmVtZW1iZXJpdHJpc2luZ2JlbnRmcmFtZWluZGVwZW5kZW50Y3VyaW91c3Nob3J0ZXI=}
  expiration: 1800000

security:
  encryption-key: "hJk+q9L/8fM3d4a5B6c7D8e9F0g1H2i3J4k5L6m7N8o="

internal:
  api:
    key: pairing-planet-bot-dev-key

file:
  upload:
    bucket: pairing-planet-local # MinIO에 생성될 버킷 이름
    url-prefix: http://localhost:9000/${file.upload.bucket}

minio:
  endpoint: http://localhost:9000
  access-key: minioadmin
  secret-key: minioadmin
  bucket-name: pairing-planet-local

# Cookie settings for development (HTTP, not HTTPS)
app:
  cookie:
    secure: false